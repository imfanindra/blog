---
import Wrapper from "@components/Wrapper.astro";
import Footer from "@components/post/Footer.astro";
import Header from "@components/post/Header.astro";
import Layout from "@layouts/Layout.astro";
import "@styles/globals.css";
import { sortPosts } from "@utils/utils";

const { frontmatter } = Astro.props;

const posts = sortPosts(
  await Astro.glob("../pages/posts/*.mdx")
);

const currPostIdx = posts.findIndex(
  (post) => post.frontmatter.title === frontmatter.title
);
const prevProject = posts[currPostIdx - 1];
const nextProject = posts[currPostIdx + 1];

const prevTitle = prevProject?.frontmatter?.title;
const nextTitle = nextProject?.frontmatter?.title;
---

<Layout title={frontmatter.title}>
  <Header {...frontmatter} />

  <div class="mt-8" aria-hidden="true"></div>

  <Wrapper
    shouldWrapMdx={frontmatter.title !== "IDK-why-this-is-there"}>
    <slot />
  </Wrapper>

  <div class="mx-auto my-8 h-px max-w-2xl bg-neutral-200">
  </div>

  <Footer
    previous={prevProject}
    next={nextProject}
    previousTitle={prevTitle}
    nextTitle={nextTitle}
  />
</Layout>
